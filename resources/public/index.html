<!DOCTYPE html>
<html ng-app="ehsm">
  <head>
    <meta charset="utf-8"/>
    <title>Buy EHSM ticket</title>
    <script src="/js/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/bootstrap-responsive.min.css"/>
    <link rel="stylesheet" href="/css/ehsm.css"/>
    <script type="text/javascript" src="https://bridge.paymill.com/"></script>
  </head>
  <body ng-controller="TicketsController">
    <h1>Buy Ticket for EHSM 2014 {{he}}</h1>
    <form action="pay" method="POST" class="well form-horizontal" ng-submit="doit()" onsubmit="return false;">
      <fieldset>
        <label>Select your ticket:</label>
        <div class="controls control-group">
          <label class="radio">
            <input type="radio" ng-model="ticket.type" value="student" bs-tooltip="tooltips.studentTicket" ng-click="updateTotal()">
            Student/unemployed € 45</label>
          <label class="radio">
            <input type="radio" ng-model="ticket.type" value="regularEarly" bs-tooltip="tooltips.earlyTicket"
                   ng-disabled="!earlyTicketAvailable" ng-click="updateTotal()">
            Regular (early) € 70</label>
          <label class="radio">
            <input type="radio" ng-model="ticket.type" value="regularLate" bs-tooltip="tooltips.lateTicket"
                   ng-disabled="earlyTicketAvailable" ng-click="updateTotal()">
            Regular (late) € 95</label>
          <label class="radio">
            <input type="radio" ng-model="ticket.type" value="supporter" bs-tooltip="tooltips.supporterTicket"
                   checked ng-click="updateTotal()">
            Supporter € 272</label>
          <label class="radio">
            <input type="radio" ng-model="ticket.type" value="goldSupporter" bs-tooltip="tooltips.goldSupporterTicket" ng-click="updateTotal()">
            Gold Supporter € 1337</label>
        </div>
        <label>We appreciate your additional donation to support EHSM:</label>
        <div class="controls controls-row">
          <div class="span3">
            <div class="input-append">
              <span class="add-on">€</span>
              <input class="card-holdername span1" type="text" size="5" ng-model="ticket.donation" bs-tooltip="tooltips.donation"
                     ng-change="updateTotal()"/>
            </div>
          </div>
        </div>
        <label>Total amount due:</label>
        <div class="controls controls-row">
          <div class="span3">
            <label ng-cloak>€ {{totalAmount}}</label>
          </div>
        </div>
      </fieldset>
      <fieldset>
        <legend>Participant</legend>
        <div class="controls controls-row">
          <div class="span3">
            <label class="card-holdername-label">Name</label>
            <input class="card-holdername span3" type="text" size="20" ng-model="ticket.participantName" bs-tooltip="tooltips.participantName"/>
          </div>
        </div>
        <div class="controls controls-row">
          <div class="span3">
            <label class="card-holdername-label">Project / Company / Affiliation</label>
            <input class="card-holdername span3" type="text" size="20" ng-model="ticket.participantProject" bs-tooltip="tooltips.participantProject"/>
          </div>
        </div>
      </fieldset>
      <fieldset>
        <legend>Invoice Information</legend>
        <div class="controls controls-row">
          <div class="span3">
            <label class="card-holdername-label">Email</label>
            <input class="card-holdername span3" type="text" size="20" ng-model="ticket.emailAddress" bs-tooltip="tooltips.emailAddress"/>
          </div>
        </div>
        <div class="controls controls-row">
          <div class="span3">
            <label class="card-holdername-label">Recipient</label>
            <textarea class="span3" rows="5" ng-model="invoiceInfo" bs-tooltip="tooltips.invoiceInformation"></textarea>
          </div>
        </div>
      </fieldset>        
      <fieldset>
        <legend>Payment</legend>
        <div class="controls controls-row">
          <div class="btn-group span4" ng-model="fop" bs-buttons-radio>
            <button type="button" class="btn" value="cc">Credit card</button>
            <button type="button" class="btn" value="elv">ELV</button>
            <button type="button" class="btn" value="bitpay">Bitpay</button>
            <button type="button" class="btn" value="wire">Wire</button>
          </div>
        </div>
        <div id="payment-form">
          <div id="payment-form-cc" ng-show="fop == 'cc'">
            <div class="controls controls-row">
              <div class="span2">
                <label class="card-number-label">Credit Card #</label>
                <input class="card-number span2" type="text" size="20" ng-model="payment.card"
                       payments-format="card" payments-validate="card" placeholder="XXXX XXXX XXXX XXXX"/>
              </div>
              <div class="span1">
                <label class="card-cvc-label">CVC</label>
                <input class="card-cvc span1" type="text" size="4" ng-model="payment.cvc"
                       payments-format="cvc" payments-validate="cvc" placeholder="XXXX"/>
              </div>
            </div>
            <div class="controls controls-row">
              <div class="span3">
                <label class="card-holdername-label">Name on Card</label>
                <input class="card-holdername span3" type="text" size="20" ng-model="payment.name"/>
              </div>
            </div>
            <div class="controls controls-row">
              <div class="span3">
                <label class="card-expiry-label">Validity</label>
                <input class="card-expiry span1" type="text" size="7" placeholder="MM / YY" ng-model="payment.expiry"
                       payments-format="expiry" payments-validate="expiry"/>
              </div>
            </div>
          </div>
          <div id="payment-form-elv" ng-show="fop == 'elv'">
            <div class="controls controls-row">
              <div class="span3">
                <label class="elv-holdername-label">Account Holder</label>
                <input class="elv-holdername span3" type="text" size="20" value="Max Mustermann" ng-model="payment.name"/>
              </div>
            </div>
            <div class="controls controls-row">
              <div class="span3">
                <label class="elv-account-label">Account #</label>
                <input class="elv-account span3" type="text" size="20" value="1234567890" ng-model="payment.kontonummer"/>
              </div>
            </div>
            <div class="controls controls-row">
              <div class="span3">
                <label class="elv-bankcode-label">Bank routing code (BLZ)</label>
                <input class="elv-bankcode span3" type="text" size="20" value="99999999" ng-model="payment.bankleitzahl"/>
              </div>
            </div>
          </div>
          <div id="payment-form-bitpay" ng-show="fop == 'bitpay'">
            <div class="controls controls-row">
              <div class="span3">
                Payment by Bitpay is not yet available, please check back later.
              </div>
            </div>
          </div>
          <div id="payment-form-wire" ng-show="fop == 'wire'">
            <div class="controls controls-row">
              <div class="span3">
                We will generate an invoice for you, you send the money by
                direct transfer to our bank account.
              </div>
            </div>
          </div>
        </div>
      </fieldset>
      <div class="controls controls-row">
        <div class="span4">
          <button class="submit-button btn btn-primary" type="submit">Pay</button>
        </div>
      </div>
    </form>
  </body>
  <script src="/js/angular.min.js"></script>
  <script src="/js/angular-resource.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/angular-strap.js"></script>
  <script src="/js/angular-payments.js"></script>
  <script src="/js/moment-with-langs.min.js"></script>
  <script src="/js/tickets.js"></script>
</html>
